%div{ class: 'nav__item nav__item--user nav__submenu__trigger js-user-signed-in' }
  %img{ class: 'nav__item--user-avatar js-user-avatar', 'data-src' => user.avatar }
  %span{ class: 'notification-badge notification-badge--unread-messages wv--inline-block is-hidden js-unread-feed-number' } 0
  %span{ class: 'wv--hidden nav--offscreen__title'}= user.username

  %div{ class: 'user-feed nav__submenu' }
    %div{ class: 'user-feed__content nav--stacked nav__submenu__content icon--tapered-arrow-up--after icon--white--after icon--white--bordered nav-user-options js-user-options' }
      %div{ class: 'user-feed__user-name nav__submenu__item nav__submenu__title' }
        = user.username
        %a{ class: 'split--right icon--settings icon--body-grey js-user-settings', href: settings_forums_url }

      %div{ class: 'user-feed__user-email nav__submenu__item nav__submenu__title' }= user.email

      %div{ class: 'user-feed__profile-buttons nav__submenu__item' }
        %div{ class: 'grid-wrapper--10' }
          %div{ class: 'col--one-half' }
            %a{ class: 'btn btn--small btn--full-width js-user-profile', href: profile_url(user) } View Profile
          %div{ class: 'col--one-half' }
            %a{ class: 'btn btn--small btn--subtle btn--full-width js-user-sign_out', href: destroy_user_session_url } Sign Out
      %div{ class: 'user-feed__activities js-user-feed' }
        %div{ class: 'nav__tabs' }
          %div{ class: 'grid-wrapper--0' }
            %div{ class: 'col--one-half' }
              %a{ class: 'btn btn--white nav__tabs__btn js-tab-trigger is-active', href: '#js-user-feed-activities' }
                Recent activity
                %span{ class: 'user-feed__activities__unread-count' }
                  (
                  %span{ class: 'js-unread-activities-number' }= user_attr user, :unread_activities_count
                  )

            %div{ class: 'col--one-half' }
              %a{ class: 'btn btn--white nav__tabs__btn js-tab-trigger', href: '#js-user-feed-messages' }
                Messages
                %span{ class: 'user-feed__activities__unread-count' }
                  (
                  %span{ class: 'js-unread-messages-number' }= user_attr user, :unread_message_count
                  )

        %div{ class: 'js-tabs-content' }
          %ul{ class: 'user-feed__activities__tab is-active', id: 'js-user-feed-activities' }
            %li{ class: 'activity-list__item--empty' } You have no recent activity

          %ul{ class: 'user-feed__activities__tab', id: 'js-user-feed-messages' }
            %li{ class: 'activity-list__item--empty' } You have no messages
            %li{ class: 'user-feed__footer user-feed__profile-buttons js-user-feed-footer' }
              %a{ class: 'btn btn--full-width', href: "/users/#{user.id}/messages" } See all messages

.wv--nav--inline.nav__item--user-menu.js-user-signed-in
  - user_navigation_items[:signed_in_links].each do |item|
    = render "components/navigation/nav_item", item: item, active: false, primary: true
